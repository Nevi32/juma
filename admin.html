<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ComPixels Studios - Admin</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Admin-specific styles */
        .admin-container {
            padding: 120px 30px 50px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .admin-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .admin-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .upload-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        }
        
        .category-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .category-tab {
            padding: 10px 20px;
            background: var(--gray-color);
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .category-tab.active, .category-tab:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .upload-form {
            background: var(--light-color);
            border-radius: 10px;
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input[type="text"],
        .form-group input[type="file"],
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--gray-color);
            border-radius: 5px;
            font-family: 'Poppins', sans-serif;
            transition: var(--transition);
        }
        
        .form-group input[type="text"]:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.2);
            outline: none;
        }
        
        .form-group textarea {
            height: 100px;
            resize: vertical;
        }
        
        .file-upload {
            display: flex;
            flex-direction: column;
        }
        
        .file-upload .upload-preview {
            margin-top: 15px;
            border: 2px dashed var(--gray-color);
            border-radius: 10px;
            padding: 15px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .file-upload .upload-preview img,
        .file-upload .upload-preview video {
            max-width: 100%;
            max-height: 300px;
            display: none;
        }
        
        .file-upload .upload-text {
            text-align: center;
            color: #777;
        }
        
        .file-upload .upload-text i {
            font-size: 3rem;
            color: var(--gray-color);
            margin-bottom: 10px;
        }
        
        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn-block {
            width: 100%;
        }
        
        .gallery-container {
            margin-top: 30px;
        }
        
        .gallery-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .gallery-header h3 {
            font-size: 1.5rem;
            color: var(--dark-color);
        }
        
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .gallery-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            height: 200px;
        }
        
        .gallery-item img,
        .gallery-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .gallery-item .item-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: var(--transition);
        }
        
        .gallery-item:hover .item-overlay {
            opacity: 1;
        }
        
        .item-actions {
            display: flex;
            gap: 10px;
        }
        
        .item-actions button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .item-actions button:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .item-info {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 10px;
            background: linear-gradient(0deg, rgba(0, 0, 0, 0.7), transparent);
            color: white;
        }
        
        .item-info h4 {
            font-size: 0.9rem;
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .logout-btn {
            position: fixed;
            top: 100px;
            right: 30px;
            z-index: 90;
        }
        
        /* Responsive styles */
        @media (max-width: 768px) {
            .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .category-tabs {
                flex-direction: column;
            }
            
            .btn-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="logo">
            <span>ComPixels Studios</span>
        </div>
        <div class="nav-toggle">
            <i class="fas fa-bars"></i>
        </div>
        <ul class="nav-links">
            <li><a href="index.html">Back to Website</a></li>
            <li><a href="#" class="cta-btn">Admin Panel</a></li>
        </ul>
    </nav>

    <!-- Admin Content -->
    <div class="admin-container">
        <div class="admin-header">
            <h1>Admin Dashboard</h1>
            <div class="underline"></div>
            <p>Upload and manage content for your website</p>
        </div>
        
        <div class="upload-section">
            <div class="category-tabs">
                <div class="category-tab active" data-tab="logo-design">Logo Design</div>
                <div class="category-tab" data-tab="poster-design">Poster Design</div>
                <div class="category-tab" data-tab="video-editing">Video Editing</div>
                <div class="category-tab" data-tab="social-media">Social Media</div>
                <div class="category-tab" data-tab="business-cards">Business Cards</div>
                <div class="category-tab" data-tab="corporate-branding">Corporate Branding</div>
            </div>
            
            <!-- Logo Design Tab -->
            <div class="tab-content active" id="logo-design">
                <h3>Upload Logo Design</h3>
                <form class="upload-form" id="logoForm">
                    <div class="form-group">
                        <label for="logoTitle">Project Title</label>
                        <input type="text" id="logoTitle" name="title" placeholder="e.g. Savanna Cafe Logo" required>
                    </div>
                    <div class="form-group">
                        <label for="logoClient">Client Name</label>
                        <input type="text" id="logoClient" name="client" placeholder="e.g. Savanna Cafe" required>
                    </div>
                    <div class="form-group">
                        <label for="logoDescription">Project Description</label>
                        <textarea id="logoDescription" name="description" placeholder="Briefly describe the project..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Logo Image</label>
                        <div class="file-upload">
                            <input type="file" id="logoFile" accept="image/*" required>
                            <div class="upload-preview">
                                <div class="upload-text">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Drag & drop or click to upload</p>
                                </div>
                                <img id="logoPreview" src="" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn primary-btn btn-block">Upload Logo</button>
                    </div>
                </form>
                
                <!-- Logo Gallery -->
                <div class="gallery-container">
                    <div class="gallery-header">
                        <h3>Logo Design Gallery</h3>
                    </div>
                    <div class="gallery-grid" id="logoGallery">
                        <!-- Sample Logo Item -->
                        <div class="gallery-item">
                            <img src="/api/placeholder/200/200" alt="Logo Sample">
                            <div class="item-overlay">
                                <div class="item-actions">
                                    <button title="Edit"><i class="fas fa-edit"></i></button>
                                    <button title="Delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </div>
                            <div class="item-info">
                                <h4>Savanna Cafe Logo</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Poster Design Tab -->
            <div class="tab-content" id="poster-design">
                <h3>Upload Poster Design</h3>
                <form class="upload-form" id="posterForm">
                    <div class="form-group">
                        <label for="posterTitle">Project Title</label>
                        <input type="text" id="posterTitle" name="title" placeholder="e.g. Nairobi Tech Week Poster" required>
                    </div>
                    <div class="form-group">
                        <label for="posterClient">Client Name</label>
                        <input type="text" id="posterClient" name="client" placeholder="e.g. Tech Week Kenya" required>
                    </div>
                    <div class="form-group">
                        <label for="posterDescription">Project Description</label>
                        <textarea id="posterDescription" name="description" placeholder="Briefly describe the project..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Poster Image</label>
                        <div class="file-upload">
                            <input type="file" id="posterFile" accept="image/*" required>
                            <div class="upload-preview">
                                <div class="upload-text">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Drag & drop or click to upload</p>
                                </div>
                                <img id="posterPreview" src="" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn primary-btn btn-block">Upload Poster</button>
                    </div>
                </form>
                
                <!-- Poster Gallery -->
                <div class="gallery-container">
                    <div class="gallery-header">
                        <h3>Poster Design Gallery</h3>
                    </div>
                    <div class="gallery-grid" id="posterGallery">
                        <!-- Sample Poster Item -->
                        <div class="gallery-item">
                            <img src="/api/placeholder/200/200" alt="Poster Sample">
                            <div class="item-overlay">
                                <div class="item-actions">
                                    <button title="Edit"><i class="fas fa-edit"></i></button>
                                    <button title="Delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </div>
                            <div class="item-info">
                                <h4>Nairobi Tech Week Poster</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Video Editing Tab -->
            <div class="tab-content" id="video-editing">
                <h3>Upload Video Project</h3>
                <form class="upload-form" id="videoForm">
                    <div class="form-group">
                        <label for="videoTitle">Project Title</label>
                        <input type="text" id="videoTitle" name="title" placeholder="e.g. Maasai Mara Tour Promo" required>
                    </div>
                    <div class="form-group">
                        <label for="videoClient">Client Name</label>
                        <input type="text" id="videoClient" name="client" placeholder="e.g. Savanna Adventures" required>
                    </div>
                    <div class="form-group">
                        <label for="videoDescription">Project Description</label>
                        <textarea id="videoDescription" name="description" placeholder="Briefly describe the project..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Video Thumbnail</label>
                        <div class="file-upload">
                            <input type="file" id="thumbFile" accept="image/*" required>
                            <div class="upload-preview">
                                <div class="upload-text">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Upload thumbnail image</p>
                                </div>
                                <img id="thumbPreview" src="" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Video File</label>
                        <div class="file-upload">
                            <input type="file" id="videoFile" accept="video/*" required>
                            <div class="upload-preview">
                                <div class="upload-text">
                                    <i class="fas fa-film"></i>
                                    <p>Upload video file</p>
                                </div>
                                <video id="videoPreview" controls></video>
                            </div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn primary-btn btn-block">Upload Video Project</button>
                    </div>
                </form>
                
                <!-- Video Gallery -->
                <div class="gallery-container">
                    <div class="gallery-header">
                        <h3>Video Projects Gallery</h3>
                    </div>
                    <div class="gallery-grid" id="videoGallery">
                        <!-- Sample Video Item -->
                        <div class="gallery-item">
                            <img src="/api/placeholder/200/200" alt="Video Sample">
                            <div class="item-overlay">
                                <div class="item-actions">
                                    <button title="Edit"><i class="fas fa-edit"></i></button>
                                    <button title="Delete"><i class="fas fa-trash"></i></button>
                                    <button title="Play"><i class="fas fa-play"></i></button>
                                </div>
                            </div>
                            <div class="item-info">
                                <h4>Maasai Mara Tour Promo</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Social Media Tab -->
            <div class="tab-content" id="social-media">
                <h3>Upload Social Media Content</h3>
                <form class="upload-form" id="socialForm">
                    <div class="form-group">
                        <label for="socialTitle">Project Title</label>
                        <input type="text" id="socialTitle" name="title" placeholder="e.g. Instagram Campaign for Nairobi Brew" required>
                    </div>
                    <div class="form-group">
                        <label for="socialClient">Client Name</label>
                        <input type="text" id="socialClient" name="client" placeholder="e.g. Nairobi Brew Co." required>
                    </div>
                    <div class="form-group">
                        <label for="socialType">Content Type</label>
                        <select id="socialType" name="type" required>
                            <option value="">Select Type</option>
                            <option value="instagram">Instagram Post</option>
                            <option value="facebook">Facebook Post</option>
                            <option value="twitter">Twitter/X Post</option>
                            <option value="linkedin">LinkedIn Post</option>
                            <option value="tiktok">TikTok Content</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="socialDescription">Project Description</label>
                        <textarea id="socialDescription" name="description" placeholder="Briefly describe the project..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Social Media Image</label>
                        <div class="file-upload">
                            <input type="file" id="socialFile" accept="image/*,video/*" required>
                            <div class="upload-preview">
                                <div class="upload-text">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Drag & drop or click to upload</p>
                                </div>
                                <img id="socialPreview" src="" alt="">
                                <video id="socialVideoPreview" controls></video>
                            </div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn primary-btn btn-block">Upload Social Media Content</button>
                    </div>
                </form>
                
                <!-- Social Media Gallery -->
                <div class="gallery-container">
                    <div class="gallery-header">
                        <h3>Social Media Gallery</h3>
                    </div>
                    <div class="gallery-grid" id="socialGallery">
                        <!-- Sample Social Media Item -->
                        <div class="gallery-item">
                            <img src="/api/placeholder/200/200" alt="Social Media Sample">
                            <div class="item-overlay">
                                <div class="item-actions">
                                    <button title="Edit"><i class="fas fa-edit"></i></button>
                                    <button title="Delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </div>
                            <div class="item-info">
                                <h4>Instagram Campaign</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Business Cards Tab -->
            <div class="tab-content" id="business-cards">
                <h3>Upload Business Card Design</h3>
                <form class="upload-form" id="cardForm">
                    <div class="form-group">
                        <label for="cardTitle">Project Title</label>
                        <input type="text" id="cardTitle" name="title" placeholder="e.g. Business Card for TechKe" required>
                    </div>
                    <div class="form-group">
                        <label for="cardClient">Client Name</label>
                        <input type="text" id="cardClient" name="client" placeholder="e.g. TechKe Solutions" required>
                    </div>
                    <div class="form-group">
                        <label for="cardDescription">Project Description</label>
                        <textarea id="cardDescription" name="description" placeholder="Briefly describe the project..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Front Image</label>
                        <div class="file-upload">
                            <input type="file" id="cardFrontFile" accept="image/*" required>
                            <div class="upload-preview">
                                <div class="upload-text">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Upload front of business card</p>
                                </div>
                                <img id="cardFrontPreview" src="" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Back Image (Optional)</label>
                        <div class="file-upload">
                            <input type="file" id="cardBackFile" accept="image/*">
                            <div class="upload-preview">
                                <div class="upload-text">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Upload back of business card</p>
                                </div>
                                <img id="cardBackPreview" src="" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn primary-btn btn-block">Upload Business Card</button>
                    </div>
                </form>
                
                <!-- Business Card Gallery -->
                <div class="gallery-container">
                    <div class="gallery-header">
                        <h3>Business Card Gallery</h3>
                    </div>
                    <div class="gallery-grid" id="cardGallery">
                        <!-- Sample Business Card Item -->
                        <div class="gallery-item">
                            <img src="/api/placeholder/200/200" alt="Business Card Sample">
                            <div class="item-overlay">
                                <div class="item-actions">
                                    <button title="Edit"><i class="fas fa-edit"></i></button>
                                    <button title="Delete"><i class="fas fa-trash"></i></button>
                                    <button title="View Back"><i class="fas fa-sync-alt"></i></button>
                                </div>
                            </div>
                            <div class="item-info">
                                <h4>TechKe Business Card</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Corporate Branding Tab -->
            <div class="tab-content" id="corporate-branding">
                <h3>Upload Corporate Branding Project</h3>
                <form class="upload-form" id="brandingForm">
                    <div class="form-group">
                        <label for="brandingTitle">Project Title</label>
                        <input type="text" id="brandingTitle" name="title" placeholder="e.g. Kilimani Properties Branding" required>
                    </div>
                    <div class="form-group">
                        <label for="brandingClient">Client Name</label>
                        <input type="text" id="brandingClient" name="client" placeholder="e.g. Kilimani Properties" required>
                    </div>
                    <div class="form-group">
                        <label for="brandingElements">Branding Elements</label>
                        <select id="brandingElements" name="elements" required>
                            <option value="">Select Branding Element</option>
                            <option value="logo">Logo</option>
                            <option value="colors">Color Palette</option>
                            <option value="typography">Typography</option>
                            <option value="stationery">Stationery</option>
                            <option value="signage">Signage</option>
                            <option value="complete">Complete Brand Package</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="brandingDescription">Project Description</label>
                        <textarea id="brandingDescription" name="description" placeholder="Briefly describe the project..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Branding Image</label>
                        <div class="file-upload">
                            <input type="file" id="brandingFile" accept="image/*" required>
                            <div class="upload-preview">
                                <div class="upload-text">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Drag & drop or click to upload</p>
                                </div>
                                <img id="brandingPreview" src="" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn primary-btn btn-block">Upload Branding Project</button>
                    </div>
                </form>
                
                <!-- Branding Gallery -->
                <div class="gallery-container">
                    <div class="gallery-header">
                        <h3>Corporate Branding Gallery</h3>
                    </div>
                    <div class="gallery-grid" id="brandingGallery">
                        <!-- Sample Branding Item -->
                        <div class="gallery-item">
                            <img src="/api/placeholder/200/200" alt="Branding Sample">
                            <div class="item-overlay">
                                <div class="item-actions">
                                    <button title="Edit"><i class="fas fa-edit"></i></button>
                                    <button title="Delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </div>
                            <div class="item-info">
                                <h4>Kilimani Properties Branding</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <a href="#" class="btn secondary-btn logout-btn">Logout</a>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2025 ComPixels Studios. Admin Panel</p>
            </div>
        </div>
    </footer>

    <script>
       // Configuration
const API_ENDPOINT = '/api/upload'; // Replace with your actual server endpoint
const GALLERIES = {
  'logoGallery': 'logo-design',
  'posterGallery': 'poster-design',
  'videoGallery': 'video-editing',
  'socialGallery': 'social-media',
  'cardGallery': 'business-cards',
  'brandingGallery': 'corporate-branding'
};

// Initialize the application when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  initializeTabs();
  initializePreviewFunctionality();
  initializeFormSubmissions();
  initializeMobileMenu();
  initializeGalleryActions();
  initializeLogoutButton();
  
  // Optional: Load existing items from the server
  loadGalleryItems();
});

// Tab functionality
function initializeTabs() {
  const tabs = document.querySelectorAll('.category-tab');
  
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      const tabId = tab.getAttribute('data-tab');
      
      // Remove active class from all tabs and content
      document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      // Add active class to current tab and content
      tab.classList.add('active');
      document.getElementById(tabId).classList.add('active');
    });
  });
}

// Image and video preview functionality
function initializePreviewFunctionality() {
  // Simple preview setup
  setupPreview('logoFile', 'logoPreview');
  setupPreview('posterFile', 'posterPreview');
  setupPreview('thumbFile', 'thumbPreview');
  setupPreview('videoFile', 'videoPreview');
  setupPreview('socialFile', 'socialPreview', 'socialVideoPreview');
  setupPreview('cardFrontFile', 'cardFrontPreview');
  setupPreview('cardBackFile', 'cardBackPreview');
  setupPreview('brandingFile', 'brandingPreview');
}

// Function to set up file input preview
function setupPreview(fileInputId, imgPreviewId, vidPreviewId = null) {
  const fileInput = document.getElementById(fileInputId);
  const imgPreview = document.getElementById(imgPreviewId);
  const vidPreview = vidPreviewId ? document.getElementById(vidPreviewId) : null;
  
  if (!fileInput || !imgPreview) return;
  
  fileInput.addEventListener('change', function() {
    const file = this.files[0];
    if (!file) return;
    
    const reader = new FileReader();
    const uploadText = fileInput.closest('.file-upload').querySelector('.upload-text');
    
    if (file.type.startsWith('image/')) {
      reader.onload = function(e) {
        imgPreview.src = e.target.result;
        imgPreview.style.display = 'block';
        if (vidPreview) vidPreview.style.display = 'none';
        if (uploadText) uploadText.style.display = 'none';
      };
      reader.readAsDataURL(file);
    } else if (file.type.startsWith('video/') && vidPreview) {
      reader.onload = function(e) {
        vidPreview.src = e.target.result;
        vidPreview.style.display = 'block';
        imgPreview.style.display = 'none';
        if (uploadText) uploadText.style.display = 'none';
      };
      reader.readAsDataURL(file);
    }
  });
  
  // Add drag and drop functionality
  const dropArea = fileInput.closest('.upload-preview');
  
  ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
    dropArea.addEventListener(eventName, preventDefaults, false);
  });
  
  function preventDefaults(e) {
    e.preventDefault();
    e.stopPropagation();
  }
  
  ['dragenter', 'dragover'].forEach(eventName => {
    dropArea.addEventListener(eventName, highlight, false);
  });
  
  ['dragleave', 'drop'].forEach(eventName => {
    dropArea.addEventListener(eventName, unhighlight, false);
  });
  
  function highlight() {
    dropArea.classList.add('highlight');
  }
  
  function unhighlight() {
    dropArea.classList.remove('highlight');
  }
  
  dropArea.addEventListener('drop', handleDrop, false);
  
  function handleDrop(e) {
    const dt = e.dataTransfer;
    const file = dt.files[0];
    fileInput.files = dt.files;
    
    // Trigger the change event
    const event = new Event('change');
    fileInput.dispatchEvent(event);
  }
}

// Form submission handling
function initializeFormSubmissions() {
  const forms = {
    'logoForm': { gallery: 'logoGallery', type: 'logo' },
    'posterForm': { gallery: 'posterGallery', type: 'poster' },
    'videoForm': { gallery: 'videoGallery', type: 'video' },
    'socialForm': { gallery: 'socialGallery', type: 'social-media' },
    'cardForm': { gallery: 'cardGallery', type: 'business-card' },
    'brandingForm': { gallery: 'brandingGallery', type: 'branding' }
  };
  
  Object.keys(forms).forEach(formId => {
    const form = document.getElementById(formId);
    if (!form) return;
    
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Validate form before submission
      if (!validateForm(form)) {
        showNotification('Please fill all required fields', 'error');
        return;
      }
      
      // Get the form data
      const formData = new FormData(form);
      formData.append('type', forms[formId].type);
      
      // Show loading state
      const submitBtn = form.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Uploading...';
      
      // Send the data to the server
      uploadFormData(formData)
        .then(response => {
          if (response.success) {
            // Reset the form
            form.reset();
            
            // Reset previews
            resetPreviews(form);
            
            // Add the new item to the gallery
            addItemToGallery(forms[formId].gallery, response.item);
            
            // Show success message
            showNotification(response.message || 'Upload successful!', 'success');
          } else {
            // Show error message
            showNotification(response.message || 'Upload failed', 'error');
          }
        })
        .catch(error => {
          console.error('Upload error:', error);
          showNotification('Upload failed: ' + (error.message || 'Unknown error'), 'error');
        })
        .finally(() => {
          // Reset button state
          submitBtn.disabled = false;
          submitBtn.textContent = originalText;
        });
    });
  });
}

// Function to validate form fields
function validateForm(form) {
  const requiredFields = form.querySelectorAll('[required]');
  let valid = true;
  
  requiredFields.forEach(field => {
    if (!field.value) {
      field.classList.add('error');
      valid = false;
    } else {
      field.classList.remove('error');
    }
  });
  
  return valid;
}

// Function to reset preview elements
function resetPreviews(form) {
  const previews = form.querySelectorAll('.upload-preview img, .upload-preview video');
  previews.forEach(preview => {
    preview.style.display = 'none';
    preview.src = '';
  });
  
  const uploadTexts = form.querySelectorAll('.upload-text');
  uploadTexts.forEach(text => {
    text.style.display = 'block';
  });
}

// Function to upload form data to the server
async function uploadFormData(formData) {
  try {
    const response = await fetch(API_ENDPOINT, {
      method: 'POST',
      body: formData,
      // If your API requires CSRF token or other headers, add them here
      headers: {
        // Example: 'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]').getAttribute('content')
      }
    });
    
    if (!response.ok) {
      throw new Error(`HTTP error! Status: ${response.status}`);
    }
    
    return await response.json();
    
    // For demo/development - simulate a successful response if no real API is available
    // return {
    //   success: true,
    //   message: 'Upload successful!',
    //   item: {
    //     id: Date.now(),
    //     title: formData.get('title'),
    //     client: formData.get('client'),
    //     imageUrl: URL.createObjectURL(formData.get('file')),
    //     description: formData.get('description'),
    //     type: formData.get('type')
    //   }
    // };
  } catch (error) {
    console.error('Upload error:', error);
    
    // For development/testing
    if (!API_ENDPOINT || API_ENDPOINT === '/api/upload') {
      // Simulate a successful upload when no real API is available
      console.warn('Using mock API response - in production, replace with real API endpoint');
      
      // Get the image file
      let imageFile;
      if (formData.get('type') === 'video') {
        imageFile = formData.get('thumbFile');
      } else if (formData.get('type') === 'business-card') {
        imageFile = formData.get('cardFrontFile');
      } else {
        // Look for any file input
        for (const [key, value] of formData.entries()) {
          if (value instanceof File && value.type.startsWith('image/')) {
            imageFile = value;
            break;
          }
        }
      }
      
      return {
        success: true,
        message: 'Upload successful! (Development mode)',
        item: {
          id: Date.now(),
          title: formData.get('title'),
          client: formData.get('client'),
          imageUrl: imageFile ? URL.createObjectURL(imageFile) : '/api/placeholder/200/200',
          description: formData.get('description') || '',
          type: formData.get('type')
        }
      };
    }
    
    throw error;
  }
}

// Function to add a new item to the gallery
function addItemToGallery(galleryId, item) {
  const gallery = document.getElementById(galleryId);
  if (!gallery) return;
  
  const itemElement = document.createElement('div');
  itemElement.className = 'gallery-item';
  itemElement.dataset.id = item.id;
  
  itemElement.innerHTML = `
    <img src="${item.imageUrl}" alt="${item.title}">
    <div class="item-overlay">
      <div class="item-actions">
        <button title="Edit" data-action="edit"><i class="fas fa-edit"></i></button>
        <button title="Delete" data-action="delete"><i class="fas fa-trash"></i></button>
        ${item.type === 'video' ? '<button title="Play" data-action="play"><i class="fas fa-play"></i></button>' : ''}
        ${item.type === 'business-card' ? '<button title="View Back" data-action="flip"><i class="fas fa-sync-alt"></i></button>' : ''}
      </div>
    </div>
    <div class="item-info">
      <h4>${item.title}</h4>
    </div>
  `;
  
  // Add to the beginning of the gallery
  gallery.insertBefore(itemElement, gallery.firstChild);
  
  // Setup action buttons
  setupItemActions(itemElement);
}

// Function to load existing gallery items from the server
function loadGalleryItems() {
  Object.keys(GALLERIES).forEach(galleryId => {
    const categoryType = GALLERIES[galleryId];
    
    // Fetch items for this category
    fetch(`/api/items?type=${categoryType}`)
      .then(response => {
        if (!response.ok) throw new Error('Network response was not ok');
        return response.json();
      })
      .then(data => {
        if (data.success && Array.isArray(data.items)) {
          const gallery = document.getElementById(galleryId);
          if (!gallery) return;
          
          // Clear existing items (except for demo items during development)
          // gallery.innerHTML = '';
          
          // Add each item to the gallery
          data.items.forEach(item => {
            addItemToGallery(galleryId, item);
          });
        }
      })
      .catch(error => {
        console.warn(`Failed to load items for ${categoryType}:`, error);
        // In development mode, we can leave the demo items
      });
  });
}

// Setup gallery item action buttons
function initializeGalleryActions() {
  document.querySelectorAll('.gallery-item').forEach(setupItemActions);
}

function setupItemActions(itemElement) {
  const actionButtons = itemElement.querySelectorAll('.item-actions button');
  
  actionButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.stopPropagation();
      const action = this.getAttribute('data-action') || this.getAttribute('title').toLowerCase();
      const galleryItem = this.closest('.gallery-item');
      const itemId = galleryItem.dataset.id;
      
      switch(action) {
        case 'edit':
          editGalleryItem(itemId, galleryItem);
          break;
        case 'delete':
          deleteGalleryItem(itemId, galleryItem);
          break;
        case 'play':
          playVideo(itemId, galleryItem);
          break;
        case 'flip':
        case 'view back':
          flipBusinessCard(itemId, galleryItem);
          break;
      }
    });
  });
}

// Function to handle editing a gallery item
function editGalleryItem(itemId, galleryItem) {
  // In a real application, you would fetch the item data from the server
  // For now, we'll show a simple notification
  showNotification('Edit functionality would load this item\'s data into the form', 'info');
  
  // Scroll to the form
  const galleryType = galleryItem.closest('.gallery-grid').id;
  const tabId = GALLERIES[galleryType];
  const tab = document.querySelector(`.category-tab[data-tab="${tabId}"]`);
  
  if (tab) {
    // Activate the tab
    tab.click();
    
    // Scroll to the form
    const form = document.getElementById(tabId).querySelector('.upload-form');
    if (form) {
      form.scrollIntoView({ behavior: 'smooth' });
    }
  }
}

// Function to handle deleting a gallery item
function deleteGalleryItem(itemId, galleryItem) {
  if (confirm('Are you sure you want to delete this item?')) {
    // Show loading state
    galleryItem.classList.add('deleting');
    
    // Send delete request to the server
    fetch(`/api/items/${itemId}`, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json',
        // Add any authentication headers if needed
      }
    })
    .then(response => {
      if (!response.ok) throw new Error('Network response was not ok');
      return response.json();
    })
    .then(data => {
      if (data.success) {
        // Remove the item from the DOM
        galleryItem.remove();
        showNotification('Item deleted successfully', 'success');
      } else {
        throw new Error(data.message || 'Failed to delete item');
      }
    })
    .catch(error => {
      console.error('Delete error:', error);
      
      // For development/testing - simulate successful deletion when no API is available
      if (!API_ENDPOINT || API_ENDPOINT === '/api/upload') {
        galleryItem.remove();
        showNotification('Item deleted (Development mode)', 'success');
      } else {
        galleryItem.classList.remove('deleting');
        showNotification('Failed to delete item: ' + error.message, 'error');
      }
    });
  }
}

// Function to handle playing a video
function playVideo(itemId, galleryItem) {
  // In a real application, you would fetch the video URL and display in a modal
  // For now, we'll show a simple notification
  showNotification('Video would play in a modal window', 'info');
}

// Function to handle flipping a business card
function flipBusinessCard(itemId, galleryItem) {
  // In a real application, you would fetch the back image and display it
  // For now, we'll show a simple notification
  showNotification('Would show the back of the business card', 'info');
}

// Mobile menu toggle
function initializeMobileMenu() {
  const navToggle = document.querySelector('.nav-toggle');
  const navLinks = document.querySelector('.nav-links');
  
  if (navToggle && navLinks) {
    navToggle.addEventListener('click', () => {
      navLinks.classList.toggle('show');
    });
  }
}

// Logout button functionality
function initializeLogoutButton() {
  const logoutBtn = document.querySelector('.logout-btn');
  
  if (logoutBtn) {
    logoutBtn.addEventListener('click', function(e) {
      e.preventDefault();
      
      if(confirm('Are you sure you want to logout?')) {
        // Send logout request to the server
        fetch('/api/logout', {
          method: 'POST',
          credentials: 'include',
          headers: {
            'Content-Type': 'application/json'
          }
        })
        .then(response => {
          if (response.ok) {
            window.location.href = 'login.html';
          } else {
            throw new Error('Logout failed');
          }
        })
        .catch(error => {
          console.error('Logout error:', error);
          
          // For development/testing
          window.location.href = 'login.html';
        });
      }
    });
  }
}

// Notification system
function showNotification(message, type = 'info') {
  // Check if notification container exists, create if not
  let notifContainer = document.getElementById('notification-container');
  
  if (!notifContainer) {
    notifContainer = document.createElement('div');
    notifContainer.id = 'notification-container';
    notifContainer.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
    `;
    document.body.appendChild(notifContainer);
  }
  
  // Create notification element
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.style.cssText = `
    background-color: ${type === 'success' ? '#4caf50' : type === 'error' ? '#f44336' : '#2196f3'};
    color: white;
    padding: 15px 20px;
    margin-bottom: 15px;
    border-radius: 5px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    min-width: 300px;
    max-width: 500px;
    opacity: 0;
    transform: translateY(-20px);
    transition: opacity 0.3s, transform 0.3s;
  `;
  
  // Create message and close button
  notification.innerHTML = `
    <div>${message}</div>
    <button style="background: none; border: none; color: white; cursor: pointer; margin-left: 10px;">
      <i class="fas fa-times"></i>
    </button>
  `;
  
  // Add to container
  notifContainer.appendChild(notification);
  
  // Animation
  setTimeout(() => {
    notification.style.opacity = '1';
    notification.style.transform = 'translateY(0)';
  }, 10);
  
  // Close button functionality
  const closeBtn = notification.querySelector('button');
  closeBtn.addEventListener('click', function() {
    closeNotification(notification);
  });
  
  // Auto close after 5 seconds
  setTimeout(() => {
    closeNotification(notification);
  }, 5000);
}

function closeNotification(notification) {
  notification.style.opacity = '0';
  notification.style.transform = 'translateY(-20px)';
  
  setTimeout(() => {
    notification.remove();
  }, 300);
}

// Add a global CSS style for the notification container
document.head.insertAdjacentHTML('beforeend', `
  <style>
    .upload-preview.highlight {
      border-color: var(--primary-color);
      background-color: rgba(255, 107, 107, 0.1);
    }
    
    .gallery-item.deleting {
      opacity: 0.5;
      pointer-events: none;
    }
    
    .form-group .error {
      border-color: #f44336;
      box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.2);
    }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .fa-spinner {
      animation: spin 1s linear infinite;
    }
  </style>
`);
    </script>
</body>
</html>
